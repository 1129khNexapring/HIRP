(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("deptManage");if(Form==this.constructor){this._setFormPosition(1080,720);}_a=new Dataset("ds_dept",this);_a._setContents("<ColumnInfo><Column id=\"deptCode\" type=\"STRING\" size=\"20\"/><Column id=\"deptName\" type=\"STRING\" size=\"30\"/><Column id=\"deptSecondname\" type=\"STRING\" size=\"50\"/><Column id=\"deptColor\" type=\"STRING\" size=\"50\"/><Column id=\"deptMaster\" type=\"STRING\" size=\"20\"/><Column id=\"deptHiredate\" type=\"DATE\" size=\"20\"/><Column id=\"deptUppercode\" type=\"STRING\" size=\"20\"/><Column id=\"deptLevel\" type=\"INT\" size=\"20\"/></ColumnInfo><Rows><Row><Col id=\"deptCode\">10</Col><Col id=\"deptName\">하이그룹</Col><Col id=\"deptSecondname\">HIGRP</Col><Col id=\"deptColor\">#FFD8D8</Col><Col id=\"deptMaster\">id1</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">NULL</Col><Col id=\"deptLevel\">0</Col></Row><Row><Col id=\"deptCode\">1010</Col><Col id=\"deptName\">경영관리팀</Col><Col id=\"deptSecondname\">BM</Col><Col id=\"deptColor\">#FAE0D4</Col><Col id=\"deptMaster\">id2</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col><Col id=\"deptLevel\">1</Col></Row><Row><Col id=\"deptCode\">1020</Col><Col id=\"deptName\">영업팀</Col><Col id=\"deptSecondname\">SALES</Col><Col id=\"deptColor\">#FAECC5</Col><Col id=\"deptMaster\">id3</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col><Col id=\"deptLevel\">1</Col></Row><Row><Col id=\"deptCode\">1030</Col><Col id=\"deptName\">상품기획팀</Col><Col id=\"deptSecondname\">SOP</Col><Col id=\"deptColor\">#FAF4C0</Col><Col id=\"deptMaster\">ID7</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col><Col id=\"deptLevel\">1</Col></Row><Row><Col id=\"deptCode\">1040</Col><Col id=\"deptLevel\">1</Col><Col id=\"deptName\">구매팀</Col><Col id=\"deptSecondname\">PCD</Col><Col id=\"deptColor\">#E4F7BA</Col><Col id=\"deptMaster\">ID8</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col></Row><Row><Col id=\"deptCode\">1050</Col><Col id=\"deptLevel\">1</Col><Col id=\"deptName\">물류팀</Col><Col id=\"deptSecondname\">DTB</Col><Col id=\"deptColor\">#CEFBC9</Col><Col id=\"deptMaster\">ID9</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col></Row><Row><Col id=\"deptCode\">1060</Col><Col id=\"deptLevel\">1</Col><Col id=\"deptName\">품질팀</Col><Col id=\"deptSecondname\">QA</Col><Col id=\"deptColor\">#D4F4FA</Col><Col id=\"deptMaster\">ID10</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col></Row><Row><Col id=\"deptCode\">1070</Col><Col id=\"deptLevel\">1</Col><Col id=\"deptName\">생산팀</Col><Col id=\"deptSecondname\">PROD</Col><Col id=\"deptColor\">#D9E5FF</Col><Col id=\"deptMaster\">ID11</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col></Row><Row><Col id=\"deptCode\">107010</Col><Col id=\"deptLevel\">2</Col><Col id=\"deptName\">생산공정팀</Col><Col id=\"deptSecondname\">PRODP</Col><Col id=\"deptColor\">#EBF7FF</Col><Col id=\"deptMaster\">ID12</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">1070</Col></Row><Row><Col id=\"deptCode\">107020</Col><Col id=\"deptLevel\">2</Col><Col id=\"deptName\">생산관리팀</Col><Col id=\"deptSecondname\">PRODM</Col><Col id=\"deptColor\">#EBF7FF</Col><Col id=\"deptMaster\">ID13</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">1070</Col></Row><Row><Col id=\"deptCode\">107030</Col><Col id=\"deptLevel\">2</Col><Col id=\"deptName\">생산외주팀</Col><Col id=\"deptSecondname\">PRODOS</Col><Col id=\"deptColor\">#EBF7FF</Col><Col id=\"deptMaster\">ID14</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">1070</Col></Row><Row><Col id=\"deptCode\">1080</Col><Col id=\"deptLevel\">1</Col><Col id=\"deptName\">제조팀</Col><Col id=\"deptSecondname\">MFT</Col><Col id=\"deptColor\">#DAD9FF</Col><Col id=\"deptMaster\">ID15</Col><Col id=\"deptHiredate\">20220426</Col><Col id=\"deptUppercode\">10</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_color",this);_a._setContents("<ColumnInfo><Column id=\"COLOR_ID\" type=\"STRING\" size=\"256\"/><Column id=\"COLOR_VAL\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"COLOR_ID\">1</Col><Col id=\"COLOR_VAL\">#FFD8D8</Col></Row><Row><Col id=\"COLOR_ID\">2</Col><Col id=\"COLOR_VAL\">#FAE0D4</Col></Row><Row><Col id=\"COLOR_ID\">3</Col><Col id=\"COLOR_VAL\">#FAECC5</Col></Row><Row><Col id=\"COLOR_ID\">4</Col><Col id=\"COLOR_VAL\">#FAF4C0</Col></Row><Row><Col id=\"COLOR_ID\">5</Col><Col id=\"COLOR_VAL\">#E4F7BA</Col></Row><Row><Col id=\"COLOR_ID\">6</Col><Col id=\"COLOR_VAL\">#CEFBC9</Col></Row><Row><Col id=\"COLOR_ID\">7</Col><Col id=\"COLOR_VAL\">#D4F4FA</Col></Row><Row><Col id=\"COLOR_ID\">8</Col><Col id=\"COLOR_VAL\">#D9E5FF</Col></Row><Row><Col id=\"COLOR_ID\">9</Col><Col id=\"COLOR_VAL\">#DAD9FF</Col></Row><Row><Col id=\"COLOR_ID\">10</Col><Col id=\"COLOR_VAL\">#E8D9FF</Col></Row><Row><Col id=\"COLOR_ID\">11</Col><Col id=\"COLOR_VAL\">#FFD9FA</Col></Row><Row><Col id=\"COLOR_ID\">12</Col><Col id=\"COLOR_VAL\">#FFD9EC</Col></Row><Row><Col id=\"COLOR_ID\">13</Col><Col id=\"COLOR_VAL\">#FFA7A7</Col></Row><Row><Col id=\"COLOR_ID\">14</Col><Col id=\"COLOR_VAL\">#FFC19E</Col></Row><Row><Col id=\"COLOR_ID\">15</Col><Col id=\"COLOR_VAL\">#FFE08C</Col></Row><Row><Col id=\"COLOR_ID\">16</Col><Col id=\"COLOR_VAL\">#FAED7D</Col></Row><Row><Col id=\"COLOR_ID\">17</Col><Col id=\"COLOR_VAL\">#CEF279</Col></Row><Row><Col id=\"COLOR_ID\">18</Col><Col id=\"COLOR_VAL\">#B7F0B1</Col></Row><Row><Col id=\"COLOR_ID\">19</Col><Col id=\"COLOR_VAL\">#B2EBF4</Col></Row><Row><Col id=\"COLOR_ID\">20</Col><Col id=\"COLOR_VAL\">#B2CCFF</Col></Row><Row><Col id=\"COLOR_ID\">21</Col><Col id=\"COLOR_VAL\">#B5B2FF</Col></Row><Row><Col id=\"COLOR_ID\">22</Col><Col id=\"COLOR_VAL\">#D1B2FF</Col></Row><Row><Col id=\"COLOR_ID\">23</Col><Col id=\"COLOR_VAL\">#FFB2F5</Col></Row><Row><Col id=\"COLOR_ID\">24</Col><Col id=\"COLOR_VAL\">#FFB2D9</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("ds_empl",this);_a._setContents("<ColumnInfo><Column id=\"emplId\" type=\"STRING\" size=\"256\"/><Column id=\"divisionCode\" type=\"STRING\" size=\"256\"/><Column id=\"positionCode\" type=\"STRING\" size=\"256\"/><Column id=\"emplPw\" type=\"STRING\" size=\"256\"/><Column id=\"emplName\" type=\"STRING\" size=\"256\"/><Column id=\"startDate\" type=\"DATE\" size=\"256\"/><Column id=\"email\" type=\"STRING\" size=\"256\"/><Column id=\"directNo\" type=\"STRING\" size=\"256\"/><Column id=\"phoneNo\" type=\"STRING\" size=\"256\"/><Column id=\"recruitCategory\" type=\"STRING\" size=\"256\"/><Column id=\"salaryCategory\" type=\"STRING\" size=\"256\"/><Column id=\"referrer\" type=\"STRING\" size=\"256\"/><Column id=\"isStatus\" type=\"STRING\" size=\"256\"/><Column id=\"birthday\" type=\"STRING\" size=\"256\"/><Column id=\"gender\" type=\"STRING\" size=\"256\"/><Column id=\"isMarriage\" type=\"STRING\" size=\"256\"/><Column id=\"isDisability\" type=\"STRING\" size=\"256\"/><Column id=\"isVeterans\" type=\"STRING\" size=\"256\"/><Column id=\"endDate\" type=\"DATE\" size=\"256\"/><Column id=\"endReason\" type=\"STRING\" size=\"256\"/><Column id=\"profile\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"emplId\">ID1</Col><Col id=\"divisionCode\">10</Col><Col id=\"positionCode\">10</Col><Col id=\"emplPw\">아무개</Col></Row><Row><Col id=\"emplId\">ID2</Col><Col id=\"divisionCode\">1010</Col><Col id=\"positionCode\">10</Col><Col id=\"emplPw\">홍길동</Col></Row><Row><Col id=\"emplId\">ID3</Col><Col id=\"divisionCode\">1020</Col><Col id=\"positionCode\">10</Col><Col id=\"emplPw\">박보검</Col></Row><Row><Col id=\"emplId\">ID4</Col><Col id=\"divisionCode\">1030</Col><Col id=\"positionCode\">10</Col><Col id=\"emplPw\">일용자</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Div("Div00_00","0","0","230",null,null,"0",null,null,null,null,this);_a.set_taborder("35");_a.set_background("#ffffff");_a.set_border("0px none, 1px solid #dddddd, 0px none, 0px none");_a.set_font("12px/normal \"Noto Sans KR\"");_a.set_text("");this.addChild(_a.name,_a);_a=new Grid("grid_deptList","15","200","200",null,null,"100",null,null,null,null,this);_a.set_taborder("0");_a.set_binddataset("ds_dept");_a.set_autofittype("col");_a.set_treeinitstatus("expand,all");_a.set_treeusecheckbox("false");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"80\"/></Columns><Rows><Row size=\"24\"/></Rows><Band id=\"body\"><Cell text=\"bind:deptName\" treelevel=\"bind:deptLevel\" displaytype=\"treeitemcontrol\" edittype=\"tree\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("static_dept01","20","15","166","41",null,null,null,null,null,null,this);_a.set_taborder("1");_a.set_text("부서 관리");_a.set_font("bold 22px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("static_dept02","20","56","166","41",null,null,null,null,null,null,this);_a.set_taborder("2");_a.set_text("조직도");_a.set_font("bold 16px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("static_dept03","27","121","50","30",null,null,null,null,null,null,this);_a.set_taborder("3");_a.set_text("부서");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Button("btn_deptAdd","160","127","15","15",null,null,null,null,null,null,this);_a.set_taborder("4");_a.set_cssclass("add_icon");this.addChild(_a.name,_a);_a=new Button("btn_delete","190","127","15","15",null,null,null,null,null,null,this);_a.set_taborder("5");_a.set_cssclass("delete_icon");this.addChild(_a.name,_a);_a=new Edit("edt_search","15","155","170","30",null,null,null,null,null,null,this);_a.set_taborder("6");this.addChild(_a.name,_a);_a=new Button("btn_search","185","155","30","30",null,null,null,null,null,null,this);_a.set_taborder("7");_a.set_cssclass("search");this.addChild(_a.name,_a);_a=new Static("static_deptInfo","280","100","157","30",null,null,null,null,null,null,this);_a.set_taborder("8");_a.set_text("부서 정보");_a.set_border("0px none,0px none,1px black");_a.set_font("bold 16px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptcolor","280","275","157","30",null,null,null,null,null,null,this);_a.set_taborder("9");_a.set_text("부서 색상");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptmaster","280","320","157","30",null,null,null,null,null,null,this);_a.set_taborder("10");_a.set_text("부서장");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_depthiredate","280","365","157","30",null,null,null,null,null,null,this);_a.set_taborder("11");_a.set_text("생성일");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_upperdept","280","410","157","30",null,null,null,null,null,null,this);_a.set_taborder("12");_a.set_text("상위 부서");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_lowerdept","280","455","157","30",null,null,null,null,null,null,this);_a.set_taborder("13");_a.set_text("하위 부서");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptname","280","185","157","30",null,null,null,null,null,null,this);_a.set_taborder("14");_a.set_text("부서명");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptcode","280","140","157","30",null,null,null,null,null,null,this);_a.set_taborder("15");_a.set_text("부서코드");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptsecond","280","230","157","30",null,null,null,null,null,null,this);_a.set_taborder("16");_a.set_text("부서약어");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Button("btn_edit_deptname","560","185","30","30",null,null,null,null,null,null,this);_a.set_taborder("17");_a.set_cssclass("edit_icon");this.addChild(_a.name,_a);_a=new Static("st_deptcolor2","403","275","157","30",null,null,null,null,null,null,this);_a.set_taborder("18");_a.set_text("부서 색상");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptmaster2","403","320","157","30",null,null,null,null,null,null,this);_a.set_taborder("19");_a.set_text("부서장");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptname2","403","185","157","30",null,null,null,null,null,null,this);_a.set_taborder("20");_a.set_text("부서명");this.addChild(_a.name,_a);_a=new Static("st_deptcode2","404","140","157","30",null,null,null,null,null,null,this);_a.set_taborder("21");_a.set_text("부서코드");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Static("st_deptsecond2","403","230","157","30",null,null,null,null,null,null,this);_a.set_taborder("22");_a.set_text("부서약어");this.addChild(_a.name,_a);_a=new Button("btn_edit_deptsecond","560","230","30","30",null,null,null,null,null,null,this);_a.set_taborder("23");_a.set_cssclass("edit_icon");this.addChild(_a.name,_a);_a=new Button("btn_edit_deptcolor","560","275","30","30",null,null,null,null,null,null,this);_a.set_taborder("24");_a.set_cssclass("edit_icon");this.addChild(_a.name,_a);_a=new Button("btn_edit_deptmaster","560","320","30","30",null,null,null,null,null,null,this);_a.set_taborder("25");_a.set_cssclass("edit_icon");this.addChild(_a.name,_a);_a=new Div("Div00","278","130","70","2",null,null,null,null,null,null,this);_a.set_taborder("26");_a.set_background("#b7b7b7");_a.set_font("14px/normal \"Noto Sans KR\"");this.addChild(_a.name,_a);_a=new Div("Div02","15","190","200","2",null,null,null,null,null,null,this);_a.set_taborder("27");_a.set_background("#b7b7b7");this.addChild(_a.name,_a);_a=new Button("btn_upper","403","415","70","20",null,null,null,null,null,null,this);_a.set_taborder("28");_a.set_text("상위 부서명");_a.set_font("normal 8pt/normal \"Noto Sans KR\"");_a.set_cssclass("deptButton");this.addChild(_a.name,_a);_a=new Button("btn_submit","560","575","80","30",null,null,null,null,null,null,this);_a.set_taborder("29");_a.set_text("저장");_a.set_letterSpacing("0px");_a.set_cssclass("save");this.addChild(_a.name,_a);_a=new Button("btn_cancel","650","575","80","30",null,null,null,null,null,null,this);_a.set_taborder("30");_a.set_text("취소");_a.set_letterSpacing("0px");_a.set_cssclass("cancel");this.addChild(_a.name,_a);_a=new Edit("edt_deptname","394","185","133","30",null,null,null,null,null,null,this);_a.set_taborder("31");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Button("btn_colorchartfromds","470","283","15","15",null,null,null,null,null,null,this);_a.set_taborder("32");_a.set_background("");this.addChild(_a.name,_a);_a=new Edit("edt_deptsecond","394","230","133","30",null,null,null,null,null,null,this);_a.set_taborder("33");_a.set_visible("false");this.addChild(_a.name,_a);_a=new MaskEdit("MaskEdit00","393","365","158","30",null,null,null,null,null,null,this);_a.set_taborder("34");_a.set_readonly("true");_a.set_background("transparent");_a.set_border("0px none");_a.set_type("string");_a.set_font("14px/normal \"Noto Sans KR\"");_a.set_format("@@@@@@@@");this.addChild(_a.name,_a);_a=new Static("Static00_00","230","0",null,"60","0",null,null,null,null,null,this);_a.set_taborder("36");_a.set_text("부서 이름");_a.set_padding("16px 20px");_a.set_font("bold 22px/normal \"Noto Sans KR\"");_a.set_letterSpacing("-1px");_a.set_border("0px none, 0px none, 1px solid #dddddd");this.addChild(_a.name,_a);_a=new Layout("default","",1080,720,this,function(_b){});_a.set_mobileorientation("landscape");this.addLayout(_a.name,_a);_a=new BindItem("item0","st_deptname2","text","ds_dept","deptName");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","st_deptcode2","text","ds_dept","deptCode");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item2","st_deptsecond2","text","ds_dept","deptSecondname");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item3","st_deptcolor2","text","ds_dept","deptColor");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item9","btn_colorchartfromds","background","ds_dept","deptColor");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item6","MaskEdit00","value","ds_dept","deptHiredate");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item4","Static00_00","text","ds_dept","deptName");this.addChild(_a.name,_a);_a.bind();};this.loadPreloadList=function(){};this.registerScript("deptManage.xfdl",function(){var _b=new nexacro.Date();var _c=_b.getYear().toString().substr(2,2);var _d=(_b.getMonth()+1).toString().padLeft(2,"0");var _e=_b.getDate().toString().padLeft(2,"0");var _f=_c+"/"+_d+"/"+_e;this.deptManage_onload=function(_a,_h){this.st_upperdept.set_visible("false");this.btn_upper.set_visible("false");this.st_lowerdept.set_visible("false");this.transaction("dept_select","HirpURL::admin/deptInfo.hirp","","ds_empl=out_empl ds_dept=out_dept","","fn_callback_tran");var _i=this.ds_dept.getColumn(this.ds_dept.rowposition,"deptMaster");var _j=this.ds_empl.lookup("emplId",_i,"emplName");trace("mastername:"+_j);this.st_deptmaster2.set_text(_j);};var _g=0;this.ds_dept_canrowposchange=function(_a,_h){for(var _t=0;_t<_g;_t++ ){var _i=this.components["btn_lower"+_t];_i.destroy();}_g=0;var _j=this.ds_dept.getColumn(_h.newrow,"deptMaster");trace("masterId cellpos:"+_j);var _k=this.ds_empl.lookup("emplId",_j,"emplName");trace("mastername cellpos:"+_k);this.st_deptmaster2.set_text(_k);var _l=this.ds_dept.getColumn(_h.newrow,"deptUppercode");var _m=this.ds_dept.getColumn(_h.newrow,"deptCode");trace(_l);if(_l==null){this.st_upperdept.set_visible("false");this.btn_upper.set_visible("false");this.st_lowerdept.set_visible("false");}else{var _n=this.ds_dept.findRow("deptCode",_l);trace("upperRow:"+_n);this.st_upperdept.set_visible("true");this.btn_upper.set_visible("true");this.btn_upper.set_text(this.ds_dept.getColumn(_n,"deptName"));var _o=[];var _p=this.ds_dept.rowcount;for(var _t=0;_t<_p;_t++ ){if(this.ds_dept.getColumn(_t,"deptUppercode")==_m){_o[_g]=this.ds_dept.getColumn(_t,"deptCode");_g+=1;}}trace("rowCount:"+_p);trace("lowerCount:"+_g);if(_g>0){this.st_lowerdept.set_visible("true");var _q=403;var _r=460;for(var _t=0;_t<_g;_t++ ){var _i=new Button("btn_lower"+_t,_q,_r,70,20);this.addChild("btn_lower"+_t,_i);var _s=this.ds_dept.lookup("deptCode",_o[_t],"deptName");_i.set_text(_s);_i.set_cssclass("deptButton");_i.setEventHandler("onclick",this.btn_lower_onclick,this);_i.show();_q+=80;}}else{this.st_lowerdept.set_visible("false");}}};this.btn_lower_onclick=function(_a,_h){trace("선택한 버튼 : "+_a.text);var _i=this.ds_dept.findRow("deptName",_a.text);this.ds_dept.set_rowposition(_i);};this.btn_deptAdd_onclick=function(_a,_h){var _i=system.clientToScreenX(this,10);var _j=system.clientToScreenY(this,10);var _k=new ChildFrame("popDeptAdd","absolute",_i,_j,300,400);_k.set_formurl("FrameBase::deptAddPopup.xfdl");_k.set_openalign("center middle");_k.set_dragmovetype("all");_k.showModal(this.getOwnerFrame(),{"ds_color":this.ds_color},this,"fn_addCallback");};this.fn_addCallback=function(_h,_i){trace(_i);var _j=this.ds_dept.rowposition;if(_i!="cancel"){var _k=_i.split(":");trace("deptname: "+_k[0]+" deptcode: "+_k[1]+" deptsecond: "+_k[2]+" deptcolor: "+_k[3]);this.ds_dept.insertRow(_j+1);this.ds_dept.setColumn(_j+1,"deptCode",_k[1]);this.ds_dept.setColumn(_j+1,"deptName",_k[0]);this.ds_dept.setColumn(_j+1,"deptSecondname",_k[2]);this.ds_dept.setColumn(_j+1,"deptColor",_k[3]);this.ds_dept.setColumn(_j+1,"deptHiredate",_f);this.ds_dept.setColumn(_j+1,"deptUppercode",this.ds_dept.getColumn(_j,"deptCode"));this.ds_dept.setColumn(_j+1,"deptLevel",this.ds_dept.getColumn(_j,"deptLevel")+1);}this.transaction("dept_add","HirpURL::admin/deptInsert.hirp","in_dept=ds_dept:U","","","fn_callback_tran");};this.btn_delete_onclick=function(_a,_h){var _i=system.clientToScreenX(this,10);var _j=system.clientToScreenY(this,10);var _k=new ChildFrame("popDeptDelete","absolute",_i,_j,300,400);_k.set_formurl("FrameBase::deptDeletePopup.xfdl");_k.set_openalign("center middle");_k.set_dragmovetype("all");_k.showModal(this.getOwnerFrame(),{},this,"fn_deleteCallback");};this.fn_deleteCallback=function(_h,_i){trace(_i);if(_i=="delete"){this.ds_dept.deleteRow(this.ds_dept.rowposition);this.transaction("dept_delete","HirpURL::admin/deptDelete.hirp","in_dept=ds_dept:U","","","fn_callback_tran");}};this.btn_search_onclick=function(_a,_h){var _i=this.edt_search.text;trace(_i);this.ds_dept.filter("deptName.indexOf('"+_i+"') > -1 ");};this.btn_submit_onclick=function(_a,_h){var _i=this.ds_dept.rowposition;var _j=this.edt_deptname.value;var _k=this.edt_deptsecond.value;var _l=this.st_deptmaster2.text;if(_j!=null){trace(_j);this.ds_dept.setColumn(_i,"deptName",_j);}if(_k!=null){trace(_k);this.ds_dept.setColumn(_i,"deptSecondname",_k);}var _m=this.ds_empl.lookup("emplName",_l,"emplId");trace("dept save master id:"+_m);this.ds_dept.setColumn(_i,"deptMaster",_m);if(this.btn_edit_deptcolor.visible==false){for(var _p=0;_p<this.ds_color.rowcount;_p++ ){var _n=this.components["btn_color"+_p];var _o=_n.getSelectStatus();if(_o){trace("저장된 컬러:"+_n.background);this.ds_dept.setColumn(_i,"deptColor",_n.background);}_n.destroy();}}this.edt_deptname.set_visible("false");this.edt_deptsecond.set_visible("false");this.btn_edit_deptname.set_visible("true");this.btn_edit_deptsecond.set_visible("true");this.btn_edit_deptcolor.set_visible("true");this.transaction("dept_save","HirpURL::admin/deptSave.hirp","in_dept=ds_dept:U","","","fn_callback_tran");};this.btn_cancel_onclick=function(_a,_h){var _i=this.ds_dept.rowposition;this.edt_deptname.set_value(this.ds_dept.getColumn(this.ds_dept.rowposition,"deptName"));this.edt_deptsecond.set_value(this.ds_dept.getColumn(this.ds_dept.rowposition,"deptSecondname"));var _j=this.ds_dept.getColumn(this.ds_dept.rowposition,"deptMaster");trace("dept cancel master Id:"+_j);var _k=this.ds_empl.lookup("emplId",_j,"emplName");trace("dept cancel master name:"+_k);this.st_deptmaster2.set_text(_k);this.edt_deptname.set_visible("false");this.edt_deptsecond.set_visible("false");for(var _m=0;_m<this.ds_color.rowcount;_m++ ){var _l=this.components["btn_color"+_m];_l.destroy();}this.btn_edit_deptname.set_visible("true");this.btn_edit_deptsecond.set_visible("true");this.btn_edit_deptcolor.set_visible("true");};this.btn_edit_deptname_onclick=function(_a,_h){this.edt_deptname.set_value(this.ds_dept.getColumn(this.ds_dept.rowposition,"deptName"));this.edt_deptname.set_visible("true");_a.set_visible("false");};this.btn_edit_deptsecond_onclick=function(_a,_h){this.edt_deptsecond.set_value(this.ds_dept.getColumn(this.ds_dept.rowposition,"deptSecondname"));this.edt_deptsecond.set_visible("true");_a.set_visible("false");};this.btn_edit_deptcolor_onclick=function(_a,_h){_a.set_visible("false");var _i=394;var _j=275;for(var _l=0;_l<this.ds_color.rowcount;_l++ ){var _k=new Button("btn_color"+_l,_i,_j,15,15);this.addChild("btn_color"+_l,_k);_k.set_background(this.ds_color.getColumn(_l,"COLOR_VAL"));_k.setEventHandler("onclick",this.btn_color_onclick,this);_k.show();_i+=14;if(_l==11){_i=394;_j+=14;}}};this.btn_color_onclick=function(_a,_h){for(var _k=0;_k<this.ds_color.rowcount;_k++ ){var _i=this.components["btn_color"+_k];var _j=_i.getSelectStatus();if(_j){_i.setSelectStatus(false);_i.set_border("");break;}}_a.setSelectStatus(true);_a.set_border("2px solid red");trace("컬러: "+_a.background);};this.btn_edit_deptmaster_onclick=function(_a,_h){var _i=system.clientToScreenX(this,10);var _j=system.clientToScreenY(this,10);var _k=new ChildFrame("popEmplListPopup","absolute",_i,_j,300,400);_k.set_formurl("FrameBase::deptEmplListPopup.xfdl");_k.set_openalign("center middle");_k.set_dragmovetype("all");var _l=this.ds_dept.rowposition;var _m=this.ds_dept.getColumn(_l,"deptCode");_k.showModal(this.getOwnerFrame(),{"deptcode":_m,"ds_empl":this.ds_empl},this,"fn_deptMasterEditCallback");};this.fn_deptMasterEditCallback=function(_h,_i){trace(_i);if(_i!="cancel"){var _j=this.ds_empl.lookup("emplId",_i,"emplName");trace("master update name:"+_j);this.st_deptmaster2.set_text(_j);}};this.btn_upper_onclick=function(_a,_h){var _i=this.ds_dept.findRow("deptName",this.btn_upper.text);trace("상위부서 : "+this.btn_upper.text);this.ds_dept.set_rowposition(_i);};this.fn_callback_tran=function(_h,_i,_j){if(_h=="dept_select"){if(_i<0){this.alert("부서 조회 실패 : "+_j);return;}}if(_h=="dept_add"){if(_i<0){this.alert("부서 추가 실패 : "+_j);return;}this.alert("부서 추가 성공 : "+this.ds_dept.getRowCount()+"건");}if(_h=="dept_delete"){if(_i<0){this.alert("부서 삭제 실패 : "+_j);return;}this.alert("부서 삭제 성공 : "+this.ds_dept.getRowCount()+"건");}if(_h=="dept_save"){if(_i<0){this.alert("부서 저장 실패 : "+_j);return;}this.alert("부서 저장 성공 : "+this.ds_dept.getRowCount()+"건");}};});this.on_initEvent=function(){this.addEventHandler("onload",this.deptManage_onload,this);this.grid_deptList.addEventHandler("oncellclick",this.grid_deptList_oncellclick,this);this.btn_deptAdd.addEventHandler("onclick",this.btn_deptAdd_onclick,this);this.btn_delete.addEventHandler("onclick",this.btn_delete_onclick,this);this.edt_search.addEventHandler("onchanged",this.edt_search_onchanged,this);this.btn_search.addEventHandler("onclick",this.btn_search_onclick,this);this.btn_edit_deptname.addEventHandler("onclick",this.btn_edit_deptname_onclick,this);this.btn_edit_deptsecond.addEventHandler("onclick",this.btn_edit_deptsecond_onclick,this);this.btn_edit_deptcolor.addEventHandler("onclick",this.btn_edit_deptcolor_onclick,this);this.btn_edit_deptmaster.addEventHandler("onclick",this.btn_edit_deptmaster_onclick,this);this.btn_upper.addEventHandler("onclick",this.btn_upper_onclick,this);this.btn_submit.addEventHandler("onclick",this.btn_submit_onclick,this);this.btn_cancel.addEventHandler("onclick",this.btn_cancel_onclick,this);this.MaskEdit00.addEventHandler("onchanged",this.MaskEdit00_onchanged,this);this.Static00_00.addEventHandler("onclick",this.Static00_onclick,this);this.ds_dept.addEventHandler("canrowposchange",this.ds_dept_canrowposchange,this);};this.loadIncludeScript("deptManage.xfdl");this.loadPreloadList();_a=null;};})();